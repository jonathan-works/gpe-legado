<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    
    <changeSet id="1" author="marialuisa" dbms="mssql">
    	<!-- A referência desse arquivo é 'scripts/StringUtil.cs' no caso o .dll -->
    	<sql>
    		drop AGGREGATE [dbo].[string_agg];
    		drop FUNCTION [dbo].[regexp_replace];
			drop assembly [StringUtils];
			
			CREATE ASSEMBLY [StringUtils]
			AUTHORIZATION dbo
			FROM 0x4d5a90000300000004000000ffff0000b800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000e1fba0e00b409cd21b8014ccd21546869732070726f6772616d2063616e6e6f742062652072756e20696e20444f53206d6f64652e0d0d0a2400000000000000504500004c010300000000000000000000000000e00002210b0108000010000000060000000000005e2e0000002000000040000000004000002000000002000004000000000000000400000000000000008000000002000000000000030040850000100000100000000010000010000000000000100000000000000000000000102e00004b00000000400000f002000000000000000000000000000000000000006000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002e74657874000000640e0000002000000010000000020000000000000000000000000000200000602e72737263000000f0020000004000000004000000120000000000000000000000000000400000402e72656c6f6300000c0000000060000000020000001600000000000000000000000000004000004200000000000000000000000000000000402e000000000000480000000200050048240000c009000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e02281100000a2a3202730200000a7d010000042a00000013300300cf000000000000000f01280300000a39010000002a0f02280300000a390c0000007201000070280400000a1002027b010000046f0500000a3a1e000000027b010000040f01fe16040000016f0600000a6f0700000a26387b0000000f03280800000a394b000000027b010000046f0600000a0f01fe16040000016f0600000a6f0900000a3a24000000027b01000004048c040000010f01fe16040000016f0600000a280a00000a6f0700000a263824000000027b01000004048c040000010f01fe16040000016f0600000a280a00000a6f0700000a262a4e027b01000004037b010000046f0b00000a262a46027b010000046f0600000a730c00000a2a8e033a0b0000007205000070730d00000a7a02036f0e00000a730f00000a7d010000042a8e033a0b0000007209000070730d00000a7a03027b010000046f0600000a6f1000000a2a1e02281100000a2a0000001330030063000000010000110f00280300000a390a0000007e1200000a38070000000f00281300000a0a0f01280300000a390a0000007e1200000a38070000000f01281300000a0b0f02280300000a390a0000007e1200000a38070000000f02281300000a0c060708281400000a2a1e02281100000a2afa026f1700000a3a0b000000036f1700000a3916000000168d0f000001168d0f000001730d0000063811000000026f1800000a036f1800000a730d0000062a3603027407000001280c00000a2a133003004c0000000000000002281100000a02037d0400000402038e697d0600000402047d0500000402048e69d27d0700000402027b0700000417fe017d0800000402167d0200000402027b07000004155a7d030000042a92027b04000004027b02000004027b03000004027b0200000459731900000a281a00000a2a000000133003002501000002000011027b03000004027b060000043f02000000162a02027b03000004027b07000004587d02000004027b020000040a38b1000000170b027b08000004391c000000027b040000040693027b0500000416933b02000000160b3844000000160c3831000000060858027b060000043c17000000027b0400000406085893027b0500000408933b07000000160b3811000000081758d20c08027b070000043fc3ffffff07393a00000002067d03000004027b03000004027b0200000459163e02000000172a06027b070000041759580a02257b02000004027b07000004587d020000040617580a06027b060000043f43ffffff02027b03000004027b07000004587d0200000402027b060000047d03000004027b03000004027b0200000459163e02000000172a162a5a02167d0200000402027b07000004155a7d030000042a42534a4201000100000000000c00000076342e302e33303331390000000005006c000000b4030000237e000020040000c803000023537472696e677300000000e80700001000000023555300f807000010000000234755494400000008080000b801000023426c6f6200000000000000020000105717a2010902000000fa01330016000001000000120000000500000008000000100000000f000000020000001b00000005000000020000000100000001000000010000000100000003000000010000000000b603010000000000060061006f000a00c800e9000a000a01e9000a0020012a010600610168010a007f012a010600960168010600b50168010600cb01d8010600ef01d8010e0035023b020a006202e9000a007d02e9000a0099022a010600a20268010a00e402e9000600070313030600630381030000000001000000000001000100012010000a00000015000100010001011000160000001500020008000100100028000000150002000a00020010003d000000150002000d0001004e00010001007b00050001008300050021008b00080021009500080021009f0005002100a9000c002100b6000f00502000000000861804017a0001005820000000008600bf027a0001006820000000008600c402360101004321000000008600cf02400104005721000000008600d50246010500692100000000e601df024b0105008d2100000000e601fc0151010600b12100000000811804017a000700bc210000000096005a02570107002b2200000000861804017a000a003322000000009600f50267010a007222000000009600260370010c008022000000008618040178010e00d82200000000e609340380011000002300000000e60140037e001000312400000000e60149037a00100000000100110100000200950000000300170100000100ad0100000100b30100000100ed01000001000202000002000b02000003001602000001007702000002008f0200000100a70202000200ab0200000100b002000002008f020200410005004500110004011200090004017a0021003f017e0021004a01820009005601880029006f018c0009007801900031008a017e0039009d0196003900a6019b0009007801a10021000401a70041000401a7004900e2018c0009000401a7005100fc01a700290004017a0039002502ac0021002b028c0059005a02af00610004017a00690004017a0071003f017e0071002b022901390004012e013900ba028c00910004017a002e00db008e0143000b0018004401b30003016001ab00b6006401b3001601610184010500010000004f038a0102000e00030004800000000000000000000000000000000057030000040000000000000000000000ad01a10300000000040000000000000000000000ad01aa0300000000040000000000000000000000ad016801000000000500040000000000003c4d6f64756c653e00436f6e636174656e61746500526567756c617245787072657373696f6e0055736572446566696e656446756e6374696f6e730053706c6974537472696e674d756c746900496e7465726d656469617465526573756c7400537472696e674275696c6465720053797374656d2e54657874006c617374506f73006e657874506f7300746865537472696e670064656c696d6974657200737472696e674c656e0064656c696d697465724c656e00697353696e676c654368617244656c696d0053716c55736572446566696e6564416767726567617465417474726962757465004d6963726f736f66742e53716c5365727665722e536572766572002e63746f7200466f726d61740076616c75650072657065617465640053716c537472696e670053797374656d2e446174612e53716c5479706573006765745f49734e756c6c006f705f496d706c69636974006765745f4c656e677468004f626a6563740053797374656d00546f537472696e6700417070656e640053716c426f6f6c65616e006765745f497346616c736500537472696e6700436f6e7461696e7300436f6e636174006f74686572007200417267756d656e744e756c6c457863657074696f6e0042696e6172795265616465720053797374656d2e494f0052656164537472696e6700770042696e6172795772697465720057726974650073716c496e7075740073716c5061747465726e0073716c5265706c6163656d656e7400456d707479006765745f56616c75650052656765780053797374656d2e546578742e526567756c617245787072657373696f6e73005265706c6163650053716c46756e6374696f6e41747472696275746500496e7075740053716c46616365744174747269627574650044656c696d697465720053716c43686172730043686172006f626a006974656d00546865537472696e67005472696d00496e697400416363756d756c617465004d65726765005465726d696e6174650052656164004942696e61727953657269616c697a650053706c6974537472696e675f4d756c74690049456e756d657261746f720053797374656d2e436f6c6c656374696f6e730046696c6c526f775f4d756c7469006765745f43757272656e74004d6f76654e6578740052657365740043757272656e7400537472696e675574696c730052756e74696d65436f6d7061746962696c6974794174747269627574650053797374656d2e52756e74696d652e436f6d70696c65725365727669636573006d73636f726c69620053797374656d2e4461746100537472696e675574696c732e646c6c00000000032c00000372000003770000000000d2378f5bdbbd694aa9a40d16f268e362000306120502060803061d0302060502060205200101110d6101000200000004005402124973496e76617269616e74546f4e756c6c73015402174973496e76617269616e74546f4475706c696361746573005402124973496e76617269616e74546f4f726465720054080b4d61784279746553697a65ffffffff032000010320000205000111110e032000080320000e05200112050e042001020e0500020e1c1c05200112051c042001010e02060e0600030e0e0e0e4c01000200540e1146696c6c526f774d6574686f644e616d650d46696c6c526f775f4d756c7469540e0f5461626c65446566696e6974696f6e136974656d206e7661726368617228343030302912010001005408074d617853697a65ffffffff12010001005408074d617853697a65ff0000000420001d03072003011d0308080920030111111111111905200101120804200011110520010112250520010112290900030e1111111111110507030e0e0e080002124512391239070002011c101111072002011d031d030320001c0507030802050328001c1e01000100540216577261704e6f6e457863657074696f6e5468726f77730108b77a5c561934e08900000000000000000000382e000000000000000000004e2e0000002000000000000000000000000000000000000000000000402e00000000000000005f436f72446c6c4d61696e006d73636f7265652e646c6c0000000000ff25002040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000980200000000000000000000980234000000560053005f00560045005200530049004f004e005f0049004e0046004f0000000000bd04effe00000100000000000000000000000000000000003f000000000000000400000002000000000000000000000000000000440000000100560061007200460069006c00650049006e0066006f00000000002400040000005400720061006e0073006c006100740069006f006e00000000007f00b004f8010000010053007400720069006e006700460069006c00650049006e0066006f000000d401000001003000300037006600300034006200300000001c000200010043006f006d006d0065006e007400730000002000000024000200010043006f006d00700061006e0079004e0061006d00650000000000200000002c0002000100460069006c0065004400650073006300720069007000740069006f006e000000000020000000300008000100460069006c006500560065007200730069006f006e000000000030002e0030002e0030002e003000000038000c00010049006e007400650072006e0061006c004e0061006d006500000053007400720069006e0067005500740069006c00730000002800020001004c006500670061006c0043006f0070007900720069006700680074000000200000002c00020001004c006500670061006c00540072006100640065006d00610072006b00730000000000200000004800100001004f0072006900670069006e0061006c00460069006c0065006e0061006d006500000053007400720069006e0067005500740069006c0073002e0064006c006c000000240002000100500072006f0064007500630074004e0061006d0065000000000020000000280002000100500072006f006400750063007400560065007200730069006f006e000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000c000000603e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
			WITH PERMISSION_SET = SAFE;
			
			CREATE AGGREGATE [dbo].[string_agg](@value NVARCHAR(4000), @delimiter NVARCHAR(255), @repeated BIT)
			RETURNS NVARCHAR(MAX)  
			EXTERNAL NAME [StringUtils].[Concatenate];

			CREATE FUNCTION [dbo].[regexp_replace] (@input nvarchar(max), @pattern nvarchar(max), @replacement nvarchar(max))
			RETURNS nvarchar(max)
			AS EXTERNAL NAME [StringUtils].[RegularExpression].[Replace];

			CREATE FUNCTION [dbo].[split_string](@List NVARCHAR(MAX), @delimiter NVARCHAR(255))
			RETURNS TABLE (Item NVARCHAR(4000))  
			EXTERNAL NAME [StringUtils].UserDefinedFunctions.SplitString_Multi;
    	</sql>
    </changeSet>
    
</databaseChangeLog>