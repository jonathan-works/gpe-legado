<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    
    <changeSet id="1" author="gabriel" dbms="mssql">
    	<!-- A referência desse arquivo é 'scripts/StringUtil.cs' no caso o .dll -->
    	<sql>
    		drop AGGREGATE [dbo].[string_agg];
			drop assembly [StringUtils];
			
			CREATE ASSEMBLY [StringUtils]
			AUTHORIZATION dbo
			FROM 0x4d5a90000300000004000000ffff0000b800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000e1fba0e00b409cd21b8014ccd21546869732070726f6772616d2063616e6e6f742062652072756e20696e20444f53206d6f64652e0d0d0a2400000000000000504500004c010300000000000000000000000000e00002210b010800000a000000060000000000001e290000002000000040000000004000002000000002000004000000000000000400000000000000008000000002000000000000030040850000100000100000000010000010000000000000100000000000000000000000d02800004b00000000400000f002000000000000000000000000000000000000006000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002e746578740000002409000000200000000a000000020000000000000000000000000000200000602e72737263000000f00200000040000000040000000c0000000000000000000000000000400000402e72656c6f6300000c0000000060000000020000001000000000000000000000000000004000004200000000000000000000000000000000002900000000000048000000020005002c2200009806000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e02281100000a2a3202730200000a7d010000042a00000013300300cf000000000000000f01280300000a39010000002a0f02280300000a390c0000007201000070280400000a1002027b010000046f0500000a3a1e000000027b010000040f01fe16040000016f0600000a6f0700000a26387b0000000f03280800000a394b000000027b010000046f0600000a0f01fe16040000016f0600000a6f0900000a3a24000000027b01000004048c040000010f01fe16040000016f0600000a280a00000a6f0700000a263824000000027b01000004048c040000010f01fe16040000016f0600000a280a00000a6f0700000a262a4e027b01000004037b010000046f0b00000a262a46027b010000046f0600000a730c00000a2a8e033a0b0000007205000070730d00000a7a02036f0e00000a730f00000a7d010000042a8e033a0b0000007209000070730d00000a7a03027b010000046f0600000a6f1000000a2a1e02281100000a2a0000001330030063000000010000110f00280300000a390a0000007e1200000a38070000000f00281300000a0a0f01280300000a390a0000007e1200000a38070000000f01281300000a0b0f02280300000a390a0000007e1200000a38070000000f02281300000a0c060708281400000a2a0042534a4201000100000000000c00000076342e302e33303331390000000005006c00000068020000237e0000d4020000a002000023537472696e67730000000074050000100000002355530084050000100000002347554944000000940500000401000023426c6f620000000000000002000010571702000900000000fa013300160000010000000d0000000300000001000000090000000900000001000000150000000200000001000000010000000300000000008e0201000000000006003b0049000a00550076000a00970076000a00b700c1000600f800ff000a001601c10006002d01ff0006004c01ff00060062016f01060086016f010e00cc01d2010a001e02760006003b0259020000000001000000000001000100012010000a0000001500010001000101100016000000150002000800010028000100502000000000861891006d0001005820000000008600f9016d0001006820000000008600fe01a900010043210000000086000902b300040057210000000086000f02b9000500692100000000e6011902be0005008d2100000000e6019301c4000600b12100000000811891006d000700bc21000000009600f101ca000700000001009e0000000200a40000000300ae00000001004401000001004a0100000100840100000100990100000200a20100000300ad0102003100110091000500090091006d002100d60071002100e10075000900ed007b00290006017f0009000f01830031002101710039003401890039003d018e0009000f019400210091009a00410091009a00490079017f00090091009a00510093019a00290091006d003900bc019f002100c2017f005900f101a200690091006d002e00ab00da0043000b000b00d4000480000000000000000000000000000000002f020000040000000000000000000000f900790200000000040000000000000000000000f900820200000000040000000000000000000000f900ff00000000000000003c4d6f64756c653e00436f6e636174656e61746500526567756c617245787072657373696f6e00496e7465726d656469617465526573756c7400537472696e674275696c6465720053797374656d2e546578740053716c55736572446566696e6564416767726567617465417474726962757465004d6963726f736f66742e53716c5365727665722e536572766572002e63746f7200466f726d61740076616c75650064656c696d697465720072657065617465640053716c537472696e670053797374656d2e446174612e53716c5479706573006765745f49734e756c6c006f705f496d706c69636974006765745f4c656e677468004f626a6563740053797374656d00546f537472696e6700417070656e640053716c426f6f6c65616e006765745f497346616c736500537472696e6700436f6e7461696e7300436f6e636174006f74686572007200417267756d656e744e756c6c457863657074696f6e0042696e6172795265616465720053797374656d2e494f0052656164537472696e6700770042696e6172795772697465720057726974650073716c496e7075740073716c5061747465726e0073716c5265706c6163656d656e7400456d707479006765745f56616c75650052656765780053797374656d2e546578742e526567756c617245787072657373696f6e73005265706c61636500496e697400416363756d756c617465004d65726765005465726d696e6174650052656164004942696e61727953657269616c697a6500537472696e675574696c730052756e74696d65436f6d7061746962696c6974794174747269627574650053797374656d2e52756e74696d652e436f6d70696c65725365727669636573006d73636f726c69620053797374656d2e4461746100537472696e675574696c732e646c6c00000000032c0000037200000377000000000078b65dfcba02794f95778670e947a251000306120505200101110d6101000200000004005402124973496e76617269616e74546f4e756c6c73015402174973496e76617269616e74546f4475706c696361746573005402124973496e76617269616e74546f4f726465720054080b4d61784279746553697a65ffffffff032000010320000205000111110e032000080320000e05200112050e042001020e0500020e1c1c05200112051c042001010e02060e0600030e0e0e0e0920030111111111111905200101120804200011110520010112250520010112290900030e1111111111110507030e0e0e1e01000100540216577261704e6f6e457863657074696f6e5468726f77730108b77a5c561934e0890000000000000000000000000000f828000000000000000000000e290000002000000000000000000000000000000000000000000000002900000000000000005f436f72446c6c4d61696e006d73636f7265652e646c6c0000000000ff25002040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000980200000000000000000000980234000000560053005f00560045005200530049004f004e005f0049004e0046004f0000000000bd04effe00000100000000000000000000000000000000003f000000000000000400000002000000000000000000000000000000440000000100560061007200460069006c00650049006e0066006f00000000002400040000005400720061006e0073006c006100740069006f006e00000000007f00b004f8010000010053007400720069006e006700460069006c00650049006e0066006f000000d401000001003000300037006600300034006200300000001c000200010043006f006d006d0065006e007400730000002000000024000200010043006f006d00700061006e0079004e0061006d00650000000000200000002c0002000100460069006c0065004400650073006300720069007000740069006f006e000000000020000000300008000100460069006c006500560065007200730069006f006e000000000030002e0030002e0030002e003000000038000c00010049006e007400650072006e0061006c004e0061006d006500000053007400720069006e0067005500740069006c00730000002800020001004c006500670061006c0043006f0070007900720069006700680074000000200000002c00020001004c006500670061006c00540072006100640065006d00610072006b00730000000000200000004800100001004f0072006900670069006e0061006c00460069006c0065006e0061006d006500000053007400720069006e0067005500740069006c0073002e0064006c006c000000240002000100500072006f0064007500630074004e0061006d0065000000000020000000280002000100500072006f006400750063007400560065007200730069006f006e000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000c000000203900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
			WITH PERMISSION_SET = SAFE;
			
			CREATE AGGREGATE [dbo].[string_agg](@value NVARCHAR(4000), @delimiter NVARCHAR(255), @repeated BIT)
			RETURNS NVARCHAR(MAX)  
			EXTERNAL NAME [StringUtils].[Concatenate];

			CREATE FUNCTION [dbo].[regexp_replace] (@input nvarchar(max), @pattern nvarchar(max), @replacement nvarchar(max))
			RETURNS nvarchar(max)
			AS EXTERNAL NAME [StringUtils].[RegularExpression].[Replace];
    	</sql>
    </changeSet>
    
</databaseChangeLog>

